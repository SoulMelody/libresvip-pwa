import{cd as dt,r as I,a0 as ft,bk as ht,cO as pt,j as ee,c as Xe,bV as gt,bW as mt,cf as vt,bX as bt,bK as yt,aC as wt,ax as Tt,cC as xt,co as kt,ca as Z,c9 as G,cD as Mt,cE as Ot,cP as Me,aa as He}from"./index-Ch-AAoqE.js";import{S as Pe}from"./sprintf-CQZ7AWXD-CuWy5xoB.js";import{F as Rt}from"./useBasicWidgetState-C59Rmhxk-DQcVZdcw.js";import"./FormClearHelper-oDeZ7GIm-BdmqdW5-.js";var le={},X={},de={},je={},Ae;function Oe(){return Ae||(Ae=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Direction=void 0,(function(r){r.Right="to right",r.Left="to left",r.Down="to bottom",r.Up="to top"})(e.Direction||(e.Direction={}))})(je)),je}var ze;function Ye(){return ze||(ze=1,(function(e){var r=de&&de.__spreadArray||function(o,s,u){if(u||arguments.length===2)for(var m=0,S=s.length,R;m<S;m++)(R||!(m in s))&&(R||(R=Array.prototype.slice.call(s,0,m)),R[m]=s[m]);return o.concat(R||Array.prototype.slice.call(s))};Object.defineProperty(e,"__esModule",{value:!0}),e.useThumbOverlap=e.assertUnreachable=e.voidFn=e.getTrackBackground=e.replaceAt=e.schd=e.translate=e.getClosestThumbIndex=e.translateThumbs=e.getPaddingAndBorder=e.getMargin=e.checkInitialOverlap=e.checkValuesAgainstBoundaries=e.checkBoundaries=e.isVertical=e.relativeValue=e.normalizeValue=e.isStepDivisible=e.isTouchEvent=e.getStepDecimals=void 0;var n=He(),i=Oe(),g=function(o){var s=o.toString().split(".")[1];return s?s.length:0};e.getStepDecimals=g;function k(o){return o.touches&&o.touches.length||o.changedTouches&&o.changedTouches.length}e.isTouchEvent=k;function l(o,s,u){var m=(s-o)/u,S=8,R=Number(m.toFixed(S));return parseInt(R.toString(),10)===R}e.isStepDivisible=l;function h(o,s,u,m,S,R,M){var b=1e11;if(o=Math.round(o*b)/b,!R){var $=M[s-1],C=M[s+1];if($&&$>o)return $;if(C&&C<o)return C}if(o>m)return m;if(o<u)return u;var B=Math.floor(o*b-u*b)%Math.floor(S*b),N=Math.floor(o*b-Math.abs(B)),H=B===0?o:N/b,A=Math.abs(B/b)<S/2?H:H+S,U=(0,e.getStepDecimals)(S);return parseFloat(A.toFixed(U))}e.normalizeValue=h;function z(o,s,u){return(o-s)/(u-s)}e.relativeValue=z;function j(o){return o===i.Direction.Up||o===i.Direction.Down}e.isVertical=j;function V(o,s,u){if(s>=u)throw new RangeError("min (".concat(s,") is equal/bigger than max (").concat(u,")"));if(o<s)throw new RangeError("value (".concat(o,") is smaller than min (").concat(s,")"));if(o>u)throw new RangeError("value (".concat(o,") is bigger than max (").concat(u,")"))}e.checkBoundaries=V;function T(o,s,u){return o<s?s:o>u?u:o}e.checkValuesAgainstBoundaries=T;function y(o){if(!(o.length<2)&&!o.slice(1).every(function(s,u){return o[u]<=s}))throw new RangeError("values={[".concat(o,"]} needs to be sorted when allowOverlap={false}"))}e.checkInitialOverlap=y;function f(o){var s=window.getComputedStyle(o);return{top:parseInt(s["margin-top"],10),bottom:parseInt(s["margin-bottom"],10),left:parseInt(s["margin-left"],10),right:parseInt(s["margin-right"],10)}}e.getMargin=f;function t(o){var s=window.getComputedStyle(o);return{top:parseInt(s["padding-top"],10)+parseInt(s["border-top-width"],10),bottom:parseInt(s["padding-bottom"],10)+parseInt(s["border-bottom-width"],10),left:parseInt(s["padding-left"],10)+parseInt(s["border-left-width"],10),right:parseInt(s["padding-right"],10)+parseInt(s["border-right-width"],10)}}e.getPaddingAndBorder=t;function a(o,s,u){var m=u?-1:1;o.forEach(function(S,R){return p(S,m*s[R].x,s[R].y)})}e.translateThumbs=a;function c(o,s,u,m){for(var S=0,R=_(o[0],s,u,m),M=1;M<o.length;M++){var b=_(o[M],s,u,m);b<R&&(R=b,S=M)}return S}e.getClosestThumbIndex=c;function p(o,s,u){o.style.transform="translate(".concat(s,"px, ").concat(u,"px)")}e.translate=p;var d=function(o){var s=[],u=null,m=function(){for(var S=[],R=0;R<arguments.length;R++)S[R]=arguments[R];s=S,!u&&(u=requestAnimationFrame(function(){u=null,o.apply(void 0,s)}))};return m};e.schd=d;function w(o,s,u){var m=o.slice(0);return m[s]=u,m}e.replaceAt=w;function E(o){var s=o.values,u=o.colors,m=o.min,S=o.max,R=o.direction,M=R===void 0?i.Direction.Right:R,b=o.rtl,$=b===void 0?!1:b;$&&M===i.Direction.Right?M=i.Direction.Left:$&&i.Direction.Left&&(M=i.Direction.Right);var C=s.slice(0).sort(function(N,H){return N-H}).map(function(N){return(N-m)/(S-m)*100}),B=C.reduce(function(N,H,A){return"".concat(N,", ").concat(u[A]," ").concat(H,"%, ").concat(u[A+1]," ").concat(H,"%")},"");return"linear-gradient(".concat(M,", ").concat(u[0]," 0%").concat(B,", ").concat(u[u.length-1]," 100%)")}e.getTrackBackground=E;function x(){}e.voidFn=x;function O(o){throw new Error("Didn't expect to get here")}e.assertUnreachable=O;var v=function(o,s,u,m,S){S===void 0&&(S=function(M){return M});var R=Math.ceil(r([o],Array.from(o.children),!0).reduce(function(M,b){var $=Math.ceil(b.getBoundingClientRect().width);if(b.innerText&&b.innerText.includes(u)&&b.childElementCount===0){var C=b.cloneNode(!0);C.innerHTML=S(s.toFixed(m)),C.style.visibility="hidden",document.body.appendChild(C),$=Math.ceil(C.getBoundingClientRect().width),document.body.removeChild(C)}return $>M?$:M},o.getBoundingClientRect().width));return R},L=function(o,s,u,m,S,R,M){M===void 0&&(M=function(C){return C});var b=[],$=function(C){var B=v(u[C],m[C],S,R,M),N=s[C].x;s.forEach(function(H,A){var U=H.x,F=v(u[A],m[A],S,R,M);C!==A&&(N>=U&&N<=U+F||N+B>=U&&N+B<=U+F)&&(b.includes(A)||(b.push(C),b.push(A),b=r(r([],b,!0),[C,A],!1),$(A)))})};return $(o),Array.from(new Set(b.sort()))},D=function(o,s,u,m,S,R){m===void 0&&(m=.1),S===void 0&&(S=" - "),R===void 0&&(R=function(A){return A});var M=(0,e.getStepDecimals)(m),b=(0,n.useState)({}),$=b[0],C=b[1],B=(0,n.useState)(R(s[u].toFixed(M))),N=B[0],H=B[1];return(0,n.useEffect)(function(){if(o){var A=o.getThumbs();if(A.length<1)return;var U={},F=o.getOffsets(),te=L(u,F,A,s,S,M,R),oe=R(s[u].toFixed(M));if(te.length){var re=te.reduce(function(J,ue,se,ce){return J.length?r(r([],J,!0),[F[ce[se]].x],!1):[F[ce[se]].x]},[]);if(Math.min.apply(Math,re)===F[u].x){var ne=[];te.forEach(function(J){ne.push(s[J].toFixed(M))}),oe=Array.from(new Set(ne.sort(function(J,ue){return parseFloat(J)-parseFloat(ue)}))).map(R).join(S);var xe=Math.min.apply(Math,re),ie=Math.max.apply(Math,re),ke=A[te[re.indexOf(ie)]].getBoundingClientRect().width;U.left="".concat(Math.abs(xe-(ie+ke))/2,"px"),U.transform="translate(-50%, 0)"}else U.visibility="hidden"}H(oe),C(U)}},[o,s]),[N,$]};e.useThumbOverlap=D;function _(o,s,u,m){var S=o.getBoundingClientRect(),R=S.left,M=S.top,b=S.width,$=S.height;return j(m)?Math.abs(u-(M+$/2)):Math.abs(s-(R+b/2))}})(de)),de}var _e;function St(){if(_e)return X;_e=1;var e=X&&X.__extends||(function(){var T=function(y,f){return T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(t[c]=a[c])},T(y,f)};return function(y,f){if(typeof f!="function"&&f!==null)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");T(y,f);function t(){this.constructor=y}y.prototype=f===null?Object.create(f):(t.prototype=f.prototype,new t)}})(),r=X&&X.__createBinding||(Object.create?function(T,y,f,t){t===void 0&&(t=f);var a=Object.getOwnPropertyDescriptor(y,f);(!a||("get"in a?!y.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return y[f]}}),Object.defineProperty(T,t,a)}:function(T,y,f,t){t===void 0&&(t=f),T[t]=y[f]}),n=X&&X.__setModuleDefault||(Object.create?function(T,y){Object.defineProperty(T,"default",{enumerable:!0,value:y})}:function(T,y){T.default=y}),i=X&&X.__importStar||function(T){if(T&&T.__esModule)return T;var y={};if(T!=null)for(var f in T)f!=="default"&&Object.prototype.hasOwnProperty.call(T,f)&&r(y,T,f);return n(y,T),y},g=X&&X.__spreadArray||function(T,y,f){if(f||arguments.length===2)for(var t=0,a=y.length,c;t<a;t++)(c||!(t in y))&&(c||(c=Array.prototype.slice.call(y,0,t)),c[t]=y[t]);return T.concat(c||Array.prototype.slice.call(y))};Object.defineProperty(X,"__esModule",{value:!0});var k=i(He()),l=Ye(),h=Oe(),z=["ArrowRight","ArrowUp","k","PageUp"],j=["ArrowLeft","ArrowDown","j","PageDown"],V=(function(T){e(y,T);function y(f){var t=T.call(this,f)||this;if(t.trackRef=k.createRef(),t.thumbRefs=[],t.state={draggedTrackPos:[-1,-1],draggedThumbIndex:-1,thumbZIndexes:new Array(t.props.values.length).fill(0).map(function(a,c){return c}),isChanged:!1,markOffsets:[]},t.getOffsets=function(){var a=t.props,c=a.direction,p=a.values,d=a.min,w=a.max,E=t.trackRef.current,x=E.getBoundingClientRect(),O=(0,l.getPaddingAndBorder)(E);return t.getThumbs().map(function(v,L){var D={x:0,y:0},_=v.getBoundingClientRect(),o=(0,l.getMargin)(v);switch(c){case h.Direction.Right:return D.x=(o.left+O.left)*-1,D.y=((_.height-x.height)/2+O.top)*-1,D.x+=x.width*(0,l.relativeValue)(p[L],d,w)-_.width/2,D;case h.Direction.Left:return D.x=(o.right+O.right)*-1,D.y=((_.height-x.height)/2+O.top)*-1,D.x+=x.width-x.width*(0,l.relativeValue)(p[L],d,w)-_.width/2,D;case h.Direction.Up:return D.x=((_.width-x.width)/2+o.left+O.left)*-1,D.y=-O.left,D.y+=x.height-x.height*(0,l.relativeValue)(p[L],d,w)-_.height/2,D;case h.Direction.Down:return D.x=((_.width-x.width)/2+o.left+O.left)*-1,D.y=-O.left,D.y+=x.height*(0,l.relativeValue)(p[L],d,w)-_.height/2,D;default:return(0,l.assertUnreachable)(c)}})},t.getThumbs=function(){return t.trackRef&&t.trackRef.current?Array.from(t.trackRef.current.children).filter(function(a){return a.hasAttribute("aria-valuenow")}):(console.warn("No thumbs found in the track container. Did you forget to pass & spread the `props` param in renderTrack?"),[])},t.getTargetIndex=function(a){return t.getThumbs().findIndex(function(c){return c===a.target||c.contains(a.target)})},t.addTouchEvents=function(a){document.addEventListener("touchmove",t.schdOnTouchMove,{passive:!1}),document.addEventListener("touchend",t.schdOnEnd,{passive:!1}),document.addEventListener("touchcancel",t.schdOnEnd,{passive:!1})},t.addMouseEvents=function(a){document.addEventListener("mousemove",t.schdOnMouseMove),document.addEventListener("mouseup",t.schdOnEnd)},t.onMouseDownTrack=function(a){var c;if(a.button===0)if(a.persist(),a.preventDefault(),t.addMouseEvents(a.nativeEvent),t.props.values.length>1&&t.props.draggableTrack){if(t.thumbRefs.some(function(d){var w;return(w=d.current)===null||w===void 0?void 0:w.contains(a.target)}))return;t.setState({draggedTrackPos:[a.clientX,a.clientY]},function(){return t.onMove(a.clientX,a.clientY)})}else{var p=(0,l.getClosestThumbIndex)(t.thumbRefs.map(function(d){return d.current}),a.clientX,a.clientY,t.props.direction);(c=t.thumbRefs[p].current)===null||c===void 0||c.focus(),t.setState({draggedThumbIndex:p},function(){return t.onMove(a.clientX,a.clientY)})}},t.onResize=function(){(0,l.translateThumbs)(t.getThumbs(),t.getOffsets(),t.props.rtl),t.calculateMarkOffsets()},t.onTouchStartTrack=function(a){var c;if(a.persist(),t.addTouchEvents(a.nativeEvent),t.props.values.length>1&&t.props.draggableTrack){if(t.thumbRefs.some(function(d){var w;return(w=d.current)===null||w===void 0?void 0:w.contains(a.target)}))return;t.setState({draggedTrackPos:[a.touches[0].clientX,a.touches[0].clientY]},function(){return t.onMove(a.touches[0].clientX,a.touches[0].clientY)})}else{var p=(0,l.getClosestThumbIndex)(t.thumbRefs.map(function(d){return d.current}),a.touches[0].clientX,a.touches[0].clientY,t.props.direction);(c=t.thumbRefs[p].current)===null||c===void 0||c.focus(),t.setState({draggedThumbIndex:p},function(){return t.onMove(a.touches[0].clientX,a.touches[0].clientY)})}},t.onMouseOrTouchStart=function(a){if(!t.props.disabled){var c=(0,l.isTouchEvent)(a);if(!(!c&&a.button!==0)){var p=t.getTargetIndex(a);p!==-1&&(c?t.addTouchEvents(a):t.addMouseEvents(a),t.setState({draggedThumbIndex:p,thumbZIndexes:t.state.thumbZIndexes.map(function(d,w){return w===p?Math.max.apply(Math,t.state.thumbZIndexes):d<=t.state.thumbZIndexes[p]?d:d-1})}))}}},t.onMouseMove=function(a){a.preventDefault(),t.onMove(a.clientX,a.clientY)},t.onTouchMove=function(a){a.preventDefault(),t.onMove(a.touches[0].clientX,a.touches[0].clientY)},t.onKeyDown=function(a){var c=t.props,p=c.values,d=c.onChange,w=c.step,E=c.rtl,x=c.direction,O=t.state.isChanged,v=t.getTargetIndex(a.nativeEvent),L=E||x===h.Direction.Left||x===h.Direction.Down?-1:1;v!==-1&&(z.includes(a.key)?(a.preventDefault(),t.setState({draggedThumbIndex:v,isChanged:!0}),d((0,l.replaceAt)(p,v,t.normalizeValue(p[v]+L*(a.key==="PageUp"?w*10:w),v)))):j.includes(a.key)?(a.preventDefault(),t.setState({draggedThumbIndex:v,isChanged:!0}),d((0,l.replaceAt)(p,v,t.normalizeValue(p[v]-L*(a.key==="PageDown"?w*10:w),v)))):a.key==="Tab"?t.setState({draggedThumbIndex:-1},function(){O&&t.fireOnFinalChange()}):O&&t.fireOnFinalChange())},t.onKeyUp=function(a){var c=t.state.isChanged;t.setState({draggedThumbIndex:-1},function(){c&&t.fireOnFinalChange()})},t.onMove=function(a,c){var p=t.state,d=p.draggedThumbIndex,w=p.draggedTrackPos,E=t.props,x=E.direction,O=E.min,v=E.max,L=E.onChange,D=E.values,_=E.step,o=E.rtl;if(d===-1&&w[0]===-1&&w[1]===-1)return null;var s=t.trackRef.current;if(!s)return null;var u=s.getBoundingClientRect(),m=(0,l.isVertical)(x)?u.height:u.width;if(w[0]!==-1&&w[1]!==-1){var S=a-w[0],R=c-w[1],M=0;switch(x){case h.Direction.Right:case h.Direction.Left:M=S/m*(v-O);break;case h.Direction.Down:case h.Direction.Up:M=R/m*(v-O);break;default:(0,l.assertUnreachable)(x)}if(o&&(M*=-1),Math.abs(M)>=_/2){for(var b=0;b<t.thumbRefs.length;b++){if(D[b]===v&&Math.sign(M)===1||D[b]===O&&Math.sign(M)===-1)return;var $=D[b]+M;$>v?M=v-D[b]:$<O&&(M=O-D[b])}for(var C=D.slice(0),b=0;b<t.thumbRefs.length;b++)C=(0,l.replaceAt)(C,b,t.normalizeValue(D[b]+M,b));t.setState({draggedTrackPos:[a,c]}),L(C)}}else{var B=0;switch(x){case h.Direction.Right:B=(a-u.left)/m*(v-O)+O;break;case h.Direction.Left:B=(m-(a-u.left))/m*(v-O)+O;break;case h.Direction.Down:B=(c-u.top)/m*(v-O)+O;break;case h.Direction.Up:B=(m-(c-u.top))/m*(v-O)+O;break;default:(0,l.assertUnreachable)(x)}o&&(B=v+O-B),Math.abs(D[d]-B)>=_/2&&L((0,l.replaceAt)(D,d,t.normalizeValue(B,d)))}},t.normalizeValue=function(a,c){var p=t.props,d=p.min,w=p.max,E=p.step,x=p.allowOverlap,O=p.values;return(0,l.normalizeValue)(a,c,d,w,E,x,O)},t.onEnd=function(a){if(a.preventDefault(),document.removeEventListener("mousemove",t.schdOnMouseMove),document.removeEventListener("touchmove",t.schdOnTouchMove),document.removeEventListener("mouseup",t.schdOnEnd),document.removeEventListener("touchend",t.schdOnEnd),document.removeEventListener("touchcancel",t.schdOnEnd),t.state.draggedThumbIndex===-1&&t.state.draggedTrackPos[0]===-1&&t.state.draggedTrackPos[1]===-1)return null;t.setState({draggedThumbIndex:-1,draggedTrackPos:[-1,-1]},function(){t.fireOnFinalChange()})},t.fireOnFinalChange=function(){t.setState({isChanged:!1});var a=t.props,c=a.onFinalChange,p=a.values;c&&c(p)},t.updateMarkRefs=function(a){if(!a.renderMark){t.numOfMarks=void 0,t.markRefs=void 0;return}t.numOfMarks=(a.max-a.min)/t.props.step,t.markRefs=[];for(var c=0;c<t.numOfMarks+1;c++)t.markRefs[c]=k.createRef()},t.calculateMarkOffsets=function(){if(!(!t.props.renderMark||!t.trackRef||!t.numOfMarks||!t.markRefs||t.trackRef.current===null)){for(var a=window.getComputedStyle(t.trackRef.current),c=parseInt(a.width,10),p=parseInt(a.height,10),d=parseInt(a.paddingLeft,10),w=parseInt(a.paddingTop,10),E=[],x=0;x<t.numOfMarks+1;x++){var O=9999,v=9999;if(t.markRefs[x].current){var L=t.markRefs[x].current.getBoundingClientRect();O=L.height,v=L.width}t.props.direction===h.Direction.Left||t.props.direction===h.Direction.Right?E.push([Math.round(c/t.numOfMarks*x+d-v/2),-Math.round((O-p)/2)]):E.push([Math.round(p/t.numOfMarks*x+w-O/2),-Math.round((v-c)/2)])}t.setState({markOffsets:E})}},f.step===0)throw new Error('"step" property should be a positive number');return t.schdOnMouseMove=(0,l.schd)(t.onMouseMove),t.schdOnTouchMove=(0,l.schd)(t.onTouchMove),t.schdOnEnd=(0,l.schd)(t.onEnd),t.thumbRefs=f.values.map(function(){return k.createRef()}),t.updateMarkRefs(f),t}return y.prototype.componentDidMount=function(){var f=this,t=this.props,a=t.values,c=t.min,p=t.step;this.resizeObserver=window.ResizeObserver?new window.ResizeObserver(this.onResize):{observe:function(){return window.addEventListener("resize",f.onResize)},unobserve:function(){return window.removeEventListener("resize",f.onResize)}},document.addEventListener("touchstart",this.onMouseOrTouchStart,{passive:!1}),document.addEventListener("mousedown",this.onMouseOrTouchStart,{passive:!1}),!this.props.allowOverlap&&(0,l.checkInitialOverlap)(this.props.values),this.props.values.forEach(function(d){return(0,l.checkBoundaries)(d,f.props.min,f.props.max)}),this.resizeObserver.observe(this.trackRef.current),(0,l.translateThumbs)(this.getThumbs(),this.getOffsets(),this.props.rtl),this.calculateMarkOffsets(),a.forEach(function(d){(0,l.isStepDivisible)(c,d,p)||console.warn("The `values` property is in conflict with the current `step`, `min`, and `max` properties. Please provide values that are accessible using the min, max, and step values.")})},y.prototype.componentDidUpdate=function(f,t){var a=this.props,c=a.max,p=a.min,d=a.step,w=a.values,E=a.rtl;(f.max!==c||f.min!==p||f.step!==d)&&this.updateMarkRefs(this.props),(0,l.translateThumbs)(this.getThumbs(),this.getOffsets(),E),(f.max!==c||f.min!==p||f.step!==d||t.markOffsets.length!==this.state.markOffsets.length)&&(this.calculateMarkOffsets(),w.forEach(function(x){(0,l.isStepDivisible)(p,x,d)||console.warn("The `values` property is in conflict with the current `step`, `min`, and `max` properties. Please provide values that are accessible using the min, max, and step values.")}))},y.prototype.componentWillUnmount=function(){var f={passive:!1};document.removeEventListener("mousedown",this.onMouseOrTouchStart,f),document.removeEventListener("mousemove",this.schdOnMouseMove),document.removeEventListener("touchmove",this.schdOnTouchMove),document.removeEventListener("touchstart",this.onMouseOrTouchStart),document.removeEventListener("mouseup",this.schdOnEnd),document.removeEventListener("touchend",this.schdOnEnd),this.resizeObserver.unobserve(this.trackRef.current)},y.prototype.render=function(){var f=this,t=this.props,a=t.renderTrack,c=t.renderThumb,p=t.renderMark,d=p===void 0?function(){return null}:p,w=t.values,E=t.min,x=t.max,O=t.allowOverlap,v=t.disabled,L=this.state,D=L.draggedThumbIndex,_=L.thumbZIndexes,o=L.markOffsets;return a({props:{style:{transform:"scale(1)",cursor:D>-1?"grabbing":this.props.draggableTrack?(0,l.isVertical)(this.props.direction)?"ns-resize":"ew-resize":w.length===1&&!v?"pointer":"inherit"},onMouseDown:v?l.voidFn:this.onMouseDownTrack,onTouchStart:v?l.voidFn:this.onTouchStartTrack,ref:this.trackRef},isDragged:this.state.draggedThumbIndex>-1,disabled:v,children:g(g([],o.map(function(s,u,m){return d({props:{style:f.props.direction===h.Direction.Left||f.props.direction===h.Direction.Right?{position:"absolute",left:"".concat(s[0],"px"),marginTop:"".concat(s[1],"px")}:{position:"absolute",top:"".concat(s[0],"px"),marginLeft:"".concat(s[1],"px")},key:"mark".concat(u),ref:f.markRefs[u]},index:u})}),!0),w.map(function(s,u){var m=f.state.draggedThumbIndex===u;return c({index:u,value:s,isDragged:m,props:{style:{position:"absolute",zIndex:_[u],cursor:v?"inherit":m?"grabbing":"grab",userSelect:"none",touchAction:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none"},key:u,tabIndex:v?void 0:0,"aria-valuemax":O?x:w[u+1]||x,"aria-valuemin":O?E:w[u-1]||E,"aria-valuenow":s,draggable:!1,ref:f.thumbRefs[u],role:"slider",onKeyDown:v?l.voidFn:f.onKeyDown,onKeyUp:v?l.voidFn:f.onKeyUp}})}),!0)})},y.defaultProps={step:1,direction:h.Direction.Right,rtl:!1,disabled:!1,allowOverlap:!1,draggableTrack:!1,min:0,max:100},y})(k.Component);return X.default=V,X}var Ve;function Et(){return Ve||(Ve=1,(function(e){var r=le&&le.__importDefault||function(k){return k&&k.__esModule?k:{default:k}};Object.defineProperty(e,"__esModule",{value:!0}),e.checkValuesAgainstBoundaries=e.relativeValue=e.useThumbOverlap=e.Direction=e.getTrackBackground=e.Range=void 0;var n=r(St());e.Range=n.default;var i=Ye();Object.defineProperty(e,"getTrackBackground",{enumerable:!0,get:function(){return i.getTrackBackground}}),Object.defineProperty(e,"useThumbOverlap",{enumerable:!0,get:function(){return i.useThumbOverlap}}),Object.defineProperty(e,"relativeValue",{enumerable:!0,get:function(){return i.relativeValue}}),Object.defineProperty(e,"checkValuesAgainstBoundaries",{enumerable:!0,get:function(){return i.checkValuesAgainstBoundaries}});var g=Oe();Object.defineProperty(e,"Direction",{enumerable:!0,get:function(){return g.Direction}})})(le)),le}var qe=Et();function Fe(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);r&&(i=i.filter(function(g){return Object.getOwnPropertyDescriptor(e,g).enumerable})),n.push.apply(n,i)}return n}function Te(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?Fe(Object(n),!0).forEach(function(i){Dt(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fe(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function Dt(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}var fe=G("div",{position:"relative",width:"100%"});fe.displayName="Root",fe.displayName="Root",fe.displayName="StyledRoot";var he=G("div",function(e){var r=e.$theme,n=e.$value,i=n===void 0?[]:n,g=e.$disabled,k=e.$isDragged,l=r.sizing,h="inherit";return g?h="not-allowed":k?h="grabbing":i.length===1&&(h="pointer"),{paddingTop:l.scale600,paddingBottom:l.scale600,paddingRight:l.scale600,paddingLeft:l.scale600,display:"flex",cursor:h,backgroundColor:r.colors.sliderTrackFill}});he.displayName="Track",he.displayName="Track",he.displayName="StyledTrack";var pe=G("div",function(e){var r=e.$theme,n=e.$value,i=n===void 0?[]:n,g=e.$min,k=e.$max,l=e.$disabled,h=r.colors,z=r.borders,j=r.direction,V=r.borders.useRoundedCorners?z.radius100:0;return{borderTopLeftRadius:V,borderTopRightRadius:V,borderBottomRightRadius:V,borderBottomLeftRadius:V,background:qe.getTrackBackground({values:i,colors:i.length===1?[l?h.borderOpaque:h.primary,l?h.backgroundSecondary:h.borderOpaque]:[l?h.backgroundSecondary:h.borderOpaque,l?h.borderOpaque:h.primary,l?h.backgroundSecondary:h.borderOpaque],min:g||0,max:k||0,rtl:j==="rtl"}),height:"2px",width:"100%",alignSelf:"center",cursor:l?"not-allowed":"inherit"}});pe.displayName="InnerTrack",pe.displayName="InnerTrack",pe.displayName="StyledInnerTrack";var ge=G("div",function(e){return{width:"4px",height:"2px",backgroundColor:e.$theme.colors.backgroundPrimary,marginLeft:"16px"}});ge.displayName="Mark",ge.displayName="Mark",ge.displayName="StyledMark";var me=G("div",function(e){return Te(Te({},e.$theme.typography.font200),{},{color:e.$theme.colors.contentPrimary})});me.displayName="Tick",me.displayName="Tick",me.displayName="StyledTick";var ve=G("div",function(e){var r=e.$theme,n=r.sizing;return{display:"flex",justifyContent:"space-between",alignItems:"center",paddingRight:n.scale600,paddingLeft:n.scale600,paddingBottom:n.scale400}});ve.displayName="TickBar",ve.displayName="TickBar",ve.displayName="StyledTickBar";var be=G("div",function(e){var r=e.$theme,n=e.$value,i=n===void 0?[]:n,g=e.$thumbIndex,k=e.$disabled,l=i.length===2&&g===0,h=i.length===2&&g===1;return r.direction==="rtl"&&(h||l)&&(l=!l,h=!h),{height:"24px",width:"24px",borderTopLeftRadius:"24px",borderTopRightRadius:"24px",borderBottomLeftRadius:"24px",borderBottomRightRadius:"24px",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:k?r.colors.sliderHandleFillDisabled:r.colors.sliderHandleFill,outline:"none",boxShadow:e.$isFocusVisible?"0 0 0 3px ".concat(r.colors.accent):"0 1px 4px rgba(0, 0, 0, 0.12)",cursor:k?"not-allowed":"inherit"}});be.displayName="Thumb",be.displayName="Thumb",be.displayName="StyledThumb";var ye=G("div",function(e){var r=e.$disabled,n=e.$theme;return{position:"absolute",top:"-16px",width:"4px",height:"20px",backgroundColor:r?n.colors.sliderHandleFillDisabled:n.colors.sliderHandleInnerFill}});ye.displayName="InnerThumb",ye.displayName="InnerThumb",ye.displayName="StyledInnerThumb";var we=G("div",function(e){var r=e.$disabled,n=e.$theme;return Te(Te({position:"absolute",top:"-".concat(n.sizing.scale1400)},n.typography.font200),{},{backgroundColor:r?n.colors.sliderHandleFillDisabled:n.colors.sliderHandleInnerFill,color:n.colors.contentInversePrimary,paddingLeft:n.sizing.scale600,paddingRight:n.sizing.scale600,paddingTop:n.sizing.scale500,paddingBottom:n.sizing.scale500,borderBottomLeftRadius:"48px",borderBottomRightRadius:"48px",borderTopLeftRadius:"48px",borderTopRightRadius:"48px",whiteSpace:"nowrap"})});we.displayName="ThumbValue",we.displayName="ThumbValue",we.displayName="StyledThumbValue";function Ne(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);r&&(i=i.filter(function(g){return Object.getOwnPropertyDescriptor(e,g).enumerable})),n.push.apply(n,i)}return n}function It(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?Ne(Object(n),!0).forEach(function(i){Ct(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ne(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function Ct(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function W(){return W=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},W.apply(this,arguments)}function q(e,r){return Pt(e)||Bt(e,r)||$t(e,r)||Lt()}function Lt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $t(e,r){if(e){if(typeof e=="string")return Ue(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ue(e,r)}}function Ue(e,r){(r==null||r>e.length)&&(r=e.length);for(var n=0,i=new Array(r);n<r;n++)i[n]=e[n];return i}function Bt(e,r){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var i=[],g=!0,k=!1,l,h;try{for(n=n.call(e);!(g=(l=n.next()).done)&&(i.push(l.value),!(r&&i.length===r));g=!0);}catch(z){k=!0,h=z}finally{try{!g&&n.return!=null&&n.return()}finally{if(k)throw h}}return i}}function Pt(e){if(Array.isArray(e))return e}var jt=function(e){if(e.length>2||e.length===0)throw new Error("the value prop represents positions of thumbs, so its length can be only one or two");return e};function At(e){var r=e.overrides,n=r===void 0?{}:r,i=e.disabled,g=i===void 0?!1:i,k=e.marks,l=k===void 0?!1:k,h=e.onChange,z=h===void 0?function(){}:h,j=e.onFinalChange,V=j===void 0?function(){}:j,T=e.min,y=T===void 0?0:T,f=e.max,t=f===void 0?100:f,a=e.step,c=a===void 0?1:a,p=e.persistentThumb,d=p===void 0?!1:p,w=e.valueToLabel,E=w===void 0?function(P){return P}:w,x=e.value,O=I.useContext(xt),v=I.useState(!1),L=q(v,2),D=L[0],_=L[1],o=I.useState(!1),s=q(o,2),u=s[0],m=s[1],S=I.useState(!1),R=q(S,2),M=R[0],b=R[1],$=I.useState(-1),C=q($,2),B=C[0],N=C[1],H=I.useCallback(function(P){kt(P)&&b(!0);var K=P.target.parentNode.firstChild===P.target?0:1;N(K)},[]),A=I.useCallback(function(P){M!==!1&&b(!1),N(-1)},[]),U=jt(x),F={$disabled:g,$step:c,$min:y,$max:t,$marks:l,$value:U,$isFocusVisible:M},te=Z(n.Root,fe),oe=q(te,2),re=oe[0],ne=oe[1],xe=Z(n.Track,he),ie=q(xe,2),ke=ie[0],J=ie[1],ue=Z(n.InnerTrack,pe),se=q(ue,2),ce=se[0],We=se[1],Ke=Z(n.Thumb,be),Re=q(Ke,2),Ze=Re[0],Ge=Re[1],Je=Z(n.InnerThumb,ye),Se=q(Je,2),Qe=Se[0],et=Se[1],tt=Z(n.ThumbValue,we),Ee=q(tt,2),rt=Ee[0],nt=Ee[1],at=Z(n.Tick,me),De=q(at,2),Ie=De[0],Ce=De[1],ot=Z(n.TickBar,ve),Le=q(ot,2),it=Le[0],st=Le[1],ut=Z(n.Mark,ge),$e=q(ut,2),ct=$e[0],lt=$e[1];return I.createElement(re,W({"data-baseweb":"slider"},F,ne,{onFocus:Ot(ne,H),onBlur:Mt(ne,A)}),I.createElement(qe.Range,W({step:c,min:y,max:t,values:U,disabled:g,onChange:function(P){return z({value:P})},onFinalChange:function(P){return V({value:P})},rtl:O.direction==="rtl",renderTrack:function(P){var K=P.props,Y=P.children,Q=P.isDragged;return I.createElement(ke,W({onMouseDown:K.onMouseDown,onTouchStart:K.onTouchStart,$isDragged:Q},F,J),I.createElement(ce,W({$isDragged:Q,ref:K.ref},F,We),Y))},renderThumb:function(P){var K=P.props,Y=P.index,Q=P.isDragged,Be=d||(!!Y&&u||!Y&&D||Q)&&!g;return I.createElement(Ze,W({},K,{onMouseEnter:function(){Y===0?_(!0):m(!0)},onMouseLeave:function(){Y===0?_(!1):m(!1)},$thumbIndex:Y,$isDragged:Q,style:It({},K.style)},F,Ge,{$isFocusVisible:M&&B===Y}),Be&&I.createElement(rt,W({$thumbIndex:Y,$isDragged:Q},F,nt),E(U[Y])),Be&&I.createElement(Qe,W({$thumbIndex:Y,$isDragged:Q},F,et)))}},l?{renderMark:function(P){var K=P.props,Y=P.index;return I.createElement(ct,W({$markIndex:Y},K,F,lt))}}:{})),I.createElement(it,W({},F,st),I.createElement(Ie,W({},F,Ce),E(y)),I.createElement(Ie,W({},F,Ce),E(t))))}const zt=Xe("div",{target:"ew7r33m1"})(({disabled:e,theme:r})=>({alignItems:"center",backgroundColor:e?r.colors.gray:r.colors.primary,borderTopLeftRadius:"100%",borderTopRightRadius:"100%",borderBottomLeftRadius:"100%",borderBottomRightRadius:"100%",borderTopStyle:"none",borderBottomStyle:"none",borderRightStyle:"none",borderLeftStyle:"none",boxShadow:"none",display:"flex",justifyContent:"center",height:r.sizes.sliderThumb,width:r.sizes.sliderThumb,":focus":{outline:"none"},":focus-visible":{boxShadow:`0 0 0 0.2rem ${Tt(r.colors.primary,.5)}`}}),""),_t=Xe("div",{target:"ew7r33m0"})(({disabled:e,theme:r})=>({fontFamily:r.genericFonts.bodyFont,fontSize:r.fontSizes.sm,color:e?r.colors.gray:r.colors.primary,top:"-1.6em",position:"absolute",whiteSpace:"nowrap",backgroundColor:r.colors.transparent,lineHeight:r.lineHeights.base,fontWeight:r.fontWeights.normal,pointerEvents:"none"}),""),Vt=200;function Ft({disabled:e,element:r,widgetMgr:n,fragmentId:i}){const[g,k]=Rt({getStateFromWidgetMgr:Nt,getDefaultStateFromProto:Ut,getCurrStateFromProto:Xt,updateWidgetMgrState:Ht,element:r,widgetMgr:n,fragmentId:i}),[l,h]=I.useState(g),z=I.useRef(null),[j]=I.useState([]),[V]=I.useState([]),T=ft(),y=l.map(d=>qt(d,r)),f=r.label;I.useEffect(()=>{h(g)},[g]);const t=I.useCallback(ht(Vt,d=>{k({value:d,fromUi:!0})}),[]),a=I.useCallback(({value:d})=>{h(d),t(d)},[t]),c=I.useCallback(I.forwardRef(function(d,w){const{$thumbIndex:E}=d,x=E||0;j[x]=w,V[x]||=I.createRef();const O=pt(d,["role","style","aria-valuemax","aria-valuemin","aria-valuenow","tabIndex","onKeyUp","onKeyDown","onMouseEnter","onMouseLeave","draggable"]),v=y[x];return ee.jsx(zt,{...O,disabled:d.$disabled===!0,ref:j[x],"aria-valuetext":v,"aria-label":f,children:ee.jsx(_t,{"data-testid":"stSliderThumbValue",disabled:d.$disabled===!0,ref:V[x],children:v})})}),[]);I.useEffect(()=>{V.map((v,L)=>{v.current&&(v.current.innerText=y[L])}),j.map((v,L)=>{v.current&&v.current.setAttribute("aria-valuetext",y[L])});const d=z.current??null,w=j[0].current,E=j[1]?.current,x=V[0].current,O=V[1]?.current;Kt(d,w,E,x,O)});const p=I.useCallback(({$disabled:d})=>({height:T.spacing.twoXS,...d?{background:T.colors.darkenedBgMix25}:{}}),[T.colors.darkenedBgMix25,T.spacing.twoXS]);return ee.jsxs("div",{ref:z,className:"stSlider","data-testid":"stSlider",children:[ee.jsx(gt,{label:r.label,disabled:e,labelVisibility:mt(r.labelVisibility?.value),children:r.help&&ee.jsx(vt,{children:ee.jsx(bt,{content:r.help,placement:yt.TOP_RIGHT})})}),ee.jsx(At,{min:r.min,max:r.max,step:r.step,value:Wt(l,r),onChange:a,disabled:e,overrides:{Thumb:c,Track:{style:{backgroundColor:"none !important",paddingLeft:T.spacing.none,paddingRight:T.spacing.none,paddingTop:`calc((${T.sizes.minElementHeight} - ${T.spacing.twoXS}) / 2)`,paddingBottom:`calc((${T.sizes.minElementHeight} - ${T.spacing.twoXS}) / 2)`}},InnerTrack:{style:p},TickBar:()=>null}})]})}function Nt(e,r){return e.getDoubleArrayValue(r)}function Ut(e){return e.default}function Xt(e){return e.value}function Ht(e,r,n,i){r.setDoubleArrayValue(e,n.value,{fromUi:n.fromUi},i)}function Yt(e){const{dataType:r}=e;return r===Me.DataType.DATETIME||r===Me.DataType.DATE||r===Me.DataType.TIME}function qt(e,r){const{format:n,options:i}=r;return Yt(r)?wt.utc(e/1e3).format(n):i.length>0?Pe.sprintf(n,i[e]):Pe.sprintf(n,e)}function Wt(e,r){const{min:n,max:i}=r;let g=e[0],k=e.length>1?e[1]:e[0];return g>k&&(g=k),g<n&&(g=n),g>i&&(g=i),k<n&&(k=n),k>i&&(k=i),e.length>1?[g,k]:[g]}function Kt(e,r,n,i,g){!e||!r||!i||(ae(e,r,i),n&&g&&(ae(e,n,g),Zt(e,r,n,i,g)))}function ae(e,r,n){const i=e.getBoundingClientRect(),g=r.getBoundingClientRect(),k=n.getBoundingClientRect(),l=g.left+g.width/2,h=l-k.width/2<i.left,z=l+k.width/2>i.right;n.style.left=h?"0":"",n.style.right=z?"0":""}function Zt(e,r,n,i,g){const k=e.getBoundingClientRect(),l=r.getBoundingClientRect(),h=n.getBoundingClientRect(),z=i.getBoundingClientRect(),j=g.getBoundingClientRect(),V=k.left+k.width/2,T=l.left+l.width/2,y=h.left+h.width/2,f=T-z.width/2>=k.left,t=y+j.width/2<=k.right,a=l.left-z.width>=k.left,c=h.right+j.width<=k.right,p=f?z.width/2:z.width,d=t?j.width/2:j.width,w=T+p;if(y-d-w>24){ae(e,r,i),ae(e,n,g);return}if(a&&c){i.style.left="",i.style.right=`${Math.round(l.width)}px`,g.style.left=`${Math.round(h.width)}px`,g.style.right="";return}T<V?(ae(e,r,i),g.style.left=`${Math.round(T+p+24-y)}px`,g.style.right=""):(ae(e,n,g),i.style.left="",i.style.right=`${-Math.round(y-d-24-T)}px`)}const tr=dt(I.memo(Ft));export{tr as default};
