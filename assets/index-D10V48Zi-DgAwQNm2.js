import{r as a,f as U,m as B,du as W,j as s,c as M,cl as _,cm as S,cF as G,cn as K,c7 as O,dv as N}from"./index-B_CN4CJH.js";import{I as Q}from"./uniqueId-CKRT4iGv-Dzv3JWez.js";import{y as q}from"./InputInstructions-ClHVf2-Y-CX6XkxNU.js";import{W as J}from"./useBasicWidgetState-DTudxgQh-C_dMYmMi.js";import{K as X,i as Y,F as Z}from"./useUpdateUiValue-Cpv9e3EF-Bci1sKUp.js";import{u as ee,Q as te}from"./useTextInputAutoExpand-Ccek2psp-BVP-964S.js";import"./FormClearHelper-D8MdXVn3-NTpCcfAz.js";import"./inputUtils-DCYiajnz-DsrlAoKH.js";import"./base-input-Dqu1lvr4-DzEfVqSG.js";const ie=(t,e)=>{let l="auto";if(t.heightConfig?.useStretch)l="100%";else if(t.heightConfig?.pixelHeight&&t.heightConfig.pixelHeight>0){const r=S(e.labelVisibility?.value)===N.Collapsed?2:30;l=`${t.heightConfig.pixelHeight-r}px`}return l},le=M("div",{target:"ezh4s2r0"})({name:"kdbhus",styles:"height:100%;display:flex;flex-direction:column"}),y=(t,e)=>t.getStringValue(e)??e.default??null,ae=t=>t.default??null,re=t=>t.value??null,oe=(t,e,l,r)=>{e.setStringValue(t,l.value,{fromUi:l.fromUi},r)},se=({disabled:t,element:e,widgetMgr:l,fragmentId:r,outerElement:m})=>{const c=a.useRef(Q("text_area_")).current,{width:I,elementRef:T}=U(),[o,u]=a.useState(!1),[v,b]=a.useState(!1),d=m.heightConfig?.useContent??!1,F=m.heightConfig?.useStretch??!1,H=ie(m,e),x=a.useRef(null),[n,h]=a.useState(()=>y(l,e)??null),R=a.useCallback(()=>{h(e.default??null),u(!0)},[e]),[V,g]=J({getStateFromWidgetMgr:y,getDefaultStateFromProto:ae,getCurrStateFromProto:re,updateWidgetMgrState:oe,element:e,widgetMgr:l,fragmentId:r,onFormCleared:R});X(V,n,h,o);const i=B(),{height:E,maxHeight:j,updateScrollHeight:C}=ee({textareaRef:x,dependencies:[e.placeholder]}),f=a.useCallback(()=>{u(!1),g({value:n,fromUi:!0})},[n,g]),k=a.useCallback(()=>{o&&f(),b(!1)},[o,f]),z=a.useCallback(()=>{b(!0)},[]),w=a.useCallback(()=>{d&&C()},[d,C]),L=Y({formId:e.formId,maxChars:e.maxChars,setDirty:u,setUiValue:h,setValueWithSource:g,additionalAction:w}),$=Z(e.formId,f,o,l,r,!0),{placeholder:D,formId:p}=e,P=W({formId:p})?l.allowFormEnterToSubmit(p):o,A=v&&I>i.breakpoints.hideWidgetDetails;return s.jsxs(le,{className:"stTextArea","data-testid":"stTextArea",ref:T,children:[s.jsx(_,{label:e.label,disabled:t,labelVisibility:S(e.labelVisibility?.value),htmlFor:c,children:e.help&&s.jsx(G,{children:s.jsx(K,{content:e.help,placement:O.TOP_RIGHT})})}),s.jsx(te,{inputRef:d?x:void 0,value:n??"",placeholder:D,onBlur:k,onFocus:z,onChange:L,onKeyDown:$,"aria-label":e.label,disabled:t,id:c,overrides:{Input:{style:{fontWeight:i.fontWeights.normal,lineHeight:i.lineHeights.inputWidget,height:d?E:H,maxHeight:d?j:"",minHeight:i.sizes.largestElementHeight,resize:F?"none":"vertical",paddingRight:i.spacing.md,paddingLeft:i.spacing.md,paddingBottom:i.spacing.md,paddingTop:i.spacing.md,"::placeholder":{color:i.colors.fadedText60}}},Root:{props:{"data-testid":"stTextAreaRootElement"},style:{borderLeftWidth:i.sizes.borderWidth,borderRightWidth:i.sizes.borderWidth,borderTopWidth:i.sizes.borderWidth,borderBottomWidth:i.sizes.borderWidth,flexGrow:1}}}}),A&&s.jsx(q,{dirty:o,value:n??"",maxLength:e.maxChars,type:"multiline",inForm:W({formId:p}),allowEnterToSubmit:P})]})},be=a.memo(se);export{be as default};
