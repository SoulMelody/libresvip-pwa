import{r as i,f as P,m as D,du as W,j as l,c as $,cl as k,cm as H,cF as M,cn as U,c7 as B,ae as _,dw as K}from"./index-B_CN4CJH.js";import{I as O}from"./uniqueId-CKRT4iGv-Dzv3JWez.js";import{y as A}from"./InputInstructions-ClHVf2-Y-CX6XkxNU.js";import{W as G}from"./useBasicWidgetState-DTudxgQh-C_dMYmMi.js";import{K as N,i as X,F as Y}from"./useUpdateUiValue-Cpv9e3EF-Bci1sKUp.js";import{i as Z}from"./input-B7nj7AfH-B022p8vj.js";import"./FormClearHelper-D8MdXVn3-NTpCcfAz.js";import"./inputUtils-DCYiajnz-DsrlAoKH.js";import"./base-input-Dqu1lvr4-DzEfVqSG.js";const q=$("div",{target:"e11y4ecf0"})({name:"bjn8wh",styles:"position:relative"});function J({disabled:a,element:e,widgetMgr:r,fragmentId:d}){const[o,u]=i.useState(()=>I(r,e)??null),{width:y,elementRef:S}=P(),[s,c]=i.useState(!1),T=i.useCallback(()=>{u(e.default??null),c(!0)},[e.default]),[C,p]=G({getStateFromWidgetMgr:I,getDefaultStateFromProto:Q,getCurrStateFromProto:ee,updateWidgetMgrState:te,element:e,widgetMgr:r,fragmentId:d,onFormCleared:T});N(C,o,u,s);const[F,f]=i.useState(!1),t=D(),[h]=i.useState(()=>O("text_input_")),{placeholder:j,formId:n,icon:m,maxChars:b}=e,g=i.useCallback(()=>{c(!1),p({value:o,fromUi:!0})},[o,p]),E=W({formId:n})?r.allowFormEnterToSubmit(n):s,v=F&&y>t.breakpoints.hideWidgetDetails,R=i.useCallback(()=>{s&&g(),f(!1)},[s,g]),V=i.useCallback(()=>{f(!0)},[]),w=X({formId:n,maxChars:b,setDirty:c,setUiValue:u,setValueWithSource:p}),z=Y(n,g,s,r,d),x=m?.startsWith(":material"),L=x?"lg":"base";return l.jsxs(q,{className:"stTextInput","data-testid":"stTextInput",ref:S,children:[l.jsx(k,{label:e.label,disabled:a,labelVisibility:H(e.labelVisibility?.value),htmlFor:h,children:e.help&&l.jsx(M,{children:l.jsx(U,{content:e.help,placement:B.TOP_RIGHT})})}),l.jsx(Z,{value:o??"",placeholder:j,onBlur:R,onFocus:V,onChange:w,onKeyPress:z,"aria-label":e.label,disabled:a,id:h,type:ae(e),autoComplete:e.autocomplete,startEnhancer:m&&l.jsx(_,{"data-testid":"stTextInputIcon",iconValue:m,size:L}),overrides:{Input:{style:{fontWeight:t.fontWeights.normal,minWidth:0,lineHeight:t.lineHeights.inputWidget,paddingRight:t.spacing.sm,paddingLeft:t.spacing.md,paddingBottom:t.spacing.sm,paddingTop:t.spacing.sm,"::placeholder":{color:t.colors.fadedText60}}},Root:{props:{"data-testid":"stTextInputRootElement"},style:{height:t.sizes.minElementHeight,borderLeftWidth:t.sizes.borderWidth,borderRightWidth:t.sizes.borderWidth,borderTopWidth:t.sizes.borderWidth,borderBottomWidth:t.sizes.borderWidth,paddingLeft:m?t.spacing.sm:0}},StartEnhancer:{style:{paddingLeft:0,paddingRight:0,minWidth:t.iconSizes.lg,color:x?t.colors.fadedText60:"inherit"}}}}),v&&l.jsx(A,{dirty:s,value:o??"",maxLength:b,inForm:W({formId:n}),allowEnterToSubmit:E})]})}function I(a,e){return a.getStringValue(e)??null}function Q(a){return a.default??null}function ee(a){return a.value??null}function te(a,e,r,d){e.setStringValue(a,r.value,{fromUi:r.fromUi},d)}function ae(a){return a.type===K.Type.PASSWORD?"password":"text"}const ce=i.memo(J);export{ce as default};
