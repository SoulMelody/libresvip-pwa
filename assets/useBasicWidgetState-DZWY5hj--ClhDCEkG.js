import{r as o,w as S}from"./index-CW7faRLg.js";import{n as c}from"./FormClearHelper-B_V_qF_E-DE_Moidv.js";function F({getStateFromWidgetMgr:n,getDefaultState:a,updateWidgetMgrState:u,element:t,widgetMgr:e,fragmentId:l,onFormCleared:d}){const[f,m]=o.useState(()=>n(e,t)??a(e,t)),[g,r]=o.useState({value:f,fromUi:!1});o.useEffect(()=>{S(g)||(r(null),m(g.value),u(t,e,g,l))},[g,u,t,e,l]);const i=o.useCallback(()=>{r({value:a(e,t),fromUi:!0}),d?.()},[r,t,a,e,d]);return c({widgetMgr:e,element:t,onFormCleared:i}),[f,r]}function C({getStateFromWidgetMgr:n,getDefaultStateFromProto:a,getCurrStateFromProto:u,updateWidgetMgrState:t,element:e,widgetMgr:l,fragmentId:d,onFormCleared:f}){const m=o.useCallback((i,s)=>a(s),[a]),[g,r]=F({getStateFromWidgetMgr:n,getDefaultState:m,updateWidgetMgrState:t,element:e,widgetMgr:l,fragmentId:d,onFormCleared:f});return o.useEffect(()=>{e.setValue&&(e.setValue=!1,r({value:u(e),fromUi:!1}))},[e,u,r]),[g,r]}export{C as F,F as S};
