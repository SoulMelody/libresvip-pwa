import{r as a,f as $,m as U,ds as W,j as s,c as B,cj as _,ck as y,cD as G,cl as O,c5 as J,dt as K}from"./index-Dl0ak3r9.js";import{m as N}from"./uniqueId-BK5M3tCR-CSs6b9YK-C8HzRRO_.js";import{b as q}from"./InputInstructions-CBRIlV8X-CPGrpFwg-DP5TUEWs.js";import{C as Q}from"./useBasicWidgetState-BmzDUKV0-Ck7qzzYQ-6LmQKWbu.js";import{d as X,b as Y,p as Z}from"./useUpdateUiValue-s6gKBdA2-D3smTDYA-BKJfSDwt.js";import{u as ee,J as te}from"./useTextInputAutoExpand-DG2zwCV_-Dbs1v1mT-CQrCQXK8.js";import"./FormClearHelper-C8nMSLiM-ZOoPDlL1-Bkd7LQt0.js";import"./inputUtils-DCYiajnz-B43QJ2xy-nYhVeN7j.js";import"./base-input-BJvYf_Lh-D5KAo0d3-C7bNWeyu.js";const ie=(t,e)=>{let l="auto";if(t.heightConfig?.useStretch)l="100%";else if(t.heightConfig?.pixelHeight&&t.heightConfig.pixelHeight>0){const r=y(e.labelVisibility?.value)===K.Collapsed?2:30;l=`${t.heightConfig.pixelHeight-r}px`}return l},le=B("div",{target:"ezh4s2r0"})({name:"kdbhus",styles:"height:100%;display:flex;flex-direction:column"}),S=(t,e)=>t.getStringValue(e)??e.default??null,ae=t=>t.default??null,re=t=>t.value??null,oe=(t,e,l,r)=>{e.setStringValue(t,l.value,{fromUi:l.fromUi},r)},se=({disabled:t,element:e,widgetMgr:l,fragmentId:r,outerElement:m})=>{const c=a.useRef(N("text_area_")).current,{width:T,elementRef:H}=$(),[o,u]=a.useState(!1),[I,b]=a.useState(!1),d=m.heightConfig?.useContent??!1,v=m.heightConfig?.useStretch??!1,R=ie(m,e),x=a.useRef(null),[n,h]=a.useState(()=>S(l,e)??null),V=a.useCallback(()=>{h(e.default??null),u(!0)},[e]),[j,g]=Q({getStateFromWidgetMgr:S,getDefaultStateFromProto:ae,getCurrStateFromProto:re,updateWidgetMgrState:oe,element:e,widgetMgr:l,fragmentId:r,onFormCleared:V});X(j,n,h,o);const i=U(),{height:E,maxHeight:F,updateScrollHeight:C}=ee({textareaRef:x,dependencies:[e.placeholder]}),f=a.useCallback(()=>{u(!1),g({value:n,fromUi:!0})},[n,g]),k=a.useCallback(()=>{o&&f(),b(!1)},[o,f]),w=a.useCallback(()=>{b(!0)},[]),z=a.useCallback(()=>{d&&C()},[d,C]),D=Y({formId:e.formId,maxChars:e.maxChars,setDirty:u,setUiValue:h,setValueWithSource:g,additionalAction:z}),L=Z(e.formId,f,o,l,r,!0),{placeholder:P,formId:p}=e,A=W({formId:p})?l.allowFormEnterToSubmit(p):o,M=I&&T>i.breakpoints.hideWidgetDetails;return s.jsxs(le,{className:"stTextArea","data-testid":"stTextArea",ref:H,children:[s.jsx(_,{label:e.label,disabled:t,labelVisibility:y(e.labelVisibility?.value),htmlFor:c,children:e.help&&s.jsx(G,{children:s.jsx(O,{content:e.help,placement:J.TOP_RIGHT})})}),s.jsx(te,{inputRef:d?x:void 0,value:n??"",placeholder:P,onBlur:k,onFocus:w,onChange:D,onKeyDown:L,"aria-label":e.label,disabled:t,id:c,overrides:{Input:{style:{fontWeight:i.fontWeights.normal,lineHeight:i.lineHeights.inputWidget,height:d?E:R,maxHeight:d?F:"",minHeight:i.sizes.largestElementHeight,resize:v?"none":"vertical",paddingRight:i.spacing.md,paddingLeft:i.spacing.md,paddingBottom:i.spacing.md,paddingTop:i.spacing.md,"::placeholder":{color:i.colors.fadedText60}}},Root:{props:{"data-testid":"stTextAreaRootElement"},style:{borderLeftWidth:i.sizes.borderWidth,borderRightWidth:i.sizes.borderWidth,borderTopWidth:i.sizes.borderWidth,borderBottomWidth:i.sizes.borderWidth,flexGrow:1}}}}),M&&s.jsx(q,{dirty:o,value:n??"",maxLength:e.maxChars,type:"multiline",inForm:W({formId:p}),allowEnterToSubmit:A})]})},be=a.memo(se);export{be as default};
