import{r as i,f as D,m as P,ds as W,j as r,c as k,cj as $,ck as H,cD as M,cl as U,c5 as B,ae as _,du as O}from"./index-BXy9S0ZG.js";import{m as q}from"./uniqueId-Dd0WfKdS-BFE2yyq9-CVSCjw9f.js";import{b as A}from"./InputInstructions-CLq8wPdc-Ced6cIHV-DBmVdHls.js";import{C as G}from"./useBasicWidgetState-D4VeU4xG-MaIlkQ17-BpsZpNll.js";import{d as K,b as N,p as Q}from"./useUpdateUiValue-Cvhsy85l-BS21pTbZ-BKE8SGvl.js";import{u as X}from"./input-fSGbrAdO-DuCxFj52-Di2nfRPa.js";import"./FormClearHelper-DSORW5o1-C9o5k7P7-CT8OSwJM.js";import"./inputUtils-DCYiajnz-B43QJ2xy-nYhVeN7j.js";import"./base-input-CLRhqzbP-C0oQqZee-DuWxoF8Q.js";const J=k("div",{target:"e11y4ecf0"})({name:"bjn8wh",styles:"position:relative"});function Y({disabled:a,element:t,widgetMgr:o,fragmentId:d}){const[s,u]=i.useState(()=>S(o,t)??null),{width:y,elementRef:I}=D(),[l,c]=i.useState(!1),T=i.useCallback(()=>{u(t.default??null),c(!0)},[t.default]),[C,p]=G({getStateFromWidgetMgr:S,getDefaultStateFromProto:Z,getCurrStateFromProto:tt,updateWidgetMgrState:et,element:t,widgetMgr:o,fragmentId:d,onFormCleared:T});K(C,s,u,l);const[j,f]=i.useState(!1),e=P(),[h]=i.useState(()=>q("text_input_")),{placeholder:E,formId:n,icon:m,maxChars:b}=t,g=i.useCallback(()=>{c(!1),p({value:s,fromUi:!0})},[s,p]),v=W({formId:n})?o.allowFormEnterToSubmit(n):l,F=j&&y>e.breakpoints.hideWidgetDetails,R=i.useCallback(()=>{l&&g(),f(!1)},[l,g]),V=i.useCallback(()=>{f(!0)},[]),w=N({formId:n,maxChars:b,setDirty:c,setUiValue:u,setValueWithSource:p}),z=Q(n,g,l,o,d),x=m?.startsWith(":material"),L=x?"lg":"base";return r.jsxs(J,{className:"stTextInput","data-testid":"stTextInput",ref:I,children:[r.jsx($,{label:t.label,disabled:a,labelVisibility:H(t.labelVisibility?.value),htmlFor:h,children:t.help&&r.jsx(M,{children:r.jsx(U,{content:t.help,placement:B.TOP_RIGHT})})}),r.jsx(X,{value:s??"",placeholder:E,onBlur:R,onFocus:V,onChange:w,onKeyPress:z,"aria-label":t.label,disabled:a,id:h,type:at(t),autoComplete:t.autocomplete,startEnhancer:m&&r.jsx(_,{"data-testid":"stTextInputIcon",iconValue:m,size:L}),overrides:{Input:{style:{fontWeight:e.fontWeights.normal,minWidth:0,lineHeight:e.lineHeights.inputWidget,paddingRight:e.spacing.sm,paddingLeft:e.spacing.md,paddingBottom:e.spacing.sm,paddingTop:e.spacing.sm,"::placeholder":{color:e.colors.fadedText60}}},Root:{props:{"data-testid":"stTextInputRootElement"},style:{height:e.sizes.minElementHeight,borderLeftWidth:e.sizes.borderWidth,borderRightWidth:e.sizes.borderWidth,borderTopWidth:e.sizes.borderWidth,borderBottomWidth:e.sizes.borderWidth,paddingLeft:m?e.spacing.sm:0}},StartEnhancer:{style:{paddingLeft:0,paddingRight:0,minWidth:e.iconSizes.lg,color:x?e.colors.fadedText60:"inherit"}}}}),F&&r.jsx(A,{dirty:l,value:s??"",maxLength:b,inForm:W({formId:n}),allowEnterToSubmit:v})]})}function S(a,t){return a.getStringValue(t)??null}function Z(a){return a.default??null}function tt(a){return a.value??null}function et(a,t,o,d){t.setStringValue(a,o.value,{fromUi:o.fromUi},d)}function at(a){return a.type===O.Type.PASSWORD?"password":"text"}const ct=i.memo(Y);export{ct as default};
