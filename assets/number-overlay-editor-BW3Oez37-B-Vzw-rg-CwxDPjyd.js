import{r as R,Q as q}from"./index-BXy9S0ZG.js";import{a as Re}from"./index-63iycogk-8hBpw-Jk-CcXfZ4B6.js";import"./withFullScreenWrapper-Dg0Awf9i-COlHnLQx-Bp_4iEIe.js";import"./Toolbar-DwupCvdF-D3M7JP7B-Cc0ZFnXH.js";import"./FormClearHelper-DSORW5o1-C9o5k7P7-CT8OSwJM.js";import"./sprintf-D5E86llw-yUkJWEcD-CuWy5xoB.js";import"./checkbox-Dxl2YmNe-CYX1lqsr-CuTwlO8a.js";import"./createDownloadLinkElement-CbRjLJ8e-BjJEUuqX-BXneJz2V.js";import"./slicedToArray-DufnYpuP-Dm33nlg3-DmtlpYEl.js";import"./inherits-D0t4NnD4-B3o6Mc-f-B2t_lqEE.js";import"./createSuper-DyjlCwUw-BiTb64Ih-L14cEwuZ.js";import"./FileDownload.esm-CV5-Gba--CRvvl245-C9izKCBC.js";const Fe=Re("div")({name:"NumberOverlayEditorStyle",class:"gdg-n15fjm3e",propsAsIs:!1});function he(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}var re;(function(e){e.event="event",e.props="prop"})(re||(re={}));function Q(){}function Ie(e){var t,r=void 0;return function(){for(var n=[],a=arguments.length;a--;)n[a]=arguments[a];return t&&n.length===t.length&&n.every(function(u,l){return u===t[l]})||(t=n,r=e.apply(void 0,n)),r}}function ae(e){return!!(e||"").match(/\d/)}function Y(e){return e==null}function Be(e){return typeof e=="number"&&isNaN(e)}function Se(e){return Y(e)||Be(e)||typeof e=="number"&&!isFinite(e)}function be(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}function Me(e){switch(e){case"lakh":return/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/g;case"wan":return/(\d)(?=(\d{4})+(?!\d))/g;case"thousand":default:return/(\d)(?=(\d{3})+(?!\d))/g}}function ke(e,t,r){var n=Me(r),a=e.search(/[1-9]/);return a=a===-1?e.length:a,e.substring(0,a)+e.substring(a,e.length).replace(n,"$1"+t)}function We(e){var t=R.useRef(e);t.current=e;var r=R.useRef(function(){for(var n=[],a=arguments.length;a--;)n[a]=arguments[a];return t.current.apply(t,n)});return r.current}function fe(e,t){t===void 0&&(t=!0);var r=e[0]==="-",n=r&&t;e=e.replace("-","");var a=e.split("."),u=a[0],l=a[1]||"";return{beforeDecimal:u,afterDecimal:l,hasNegation:r,addNegation:n}}function Le(e){if(!e)return e;var t=e[0]==="-";t&&(e=e.substring(1,e.length));var r=e.split("."),n=r[0].replace(/^0+/,"")||"0",a=r[1]||"";return(t?"-":"")+n+(a?"."+a:"")}function ye(e,t,r){for(var n="",a=r?"0":"",u=0;u<=t-1;u++)n+=e[u]||a;return n}function de(e,t){return Array(t+1).join(e)}function xe(e){var t=e+"",r=t[0]==="-"?"-":"";r&&(t=t.substring(1));var n=t.split(/[eE]/g),a=n[0],u=n[1];if(u=Number(u),!u)return r+a;a=a.replace(".","");var l=1+u,m=a.length;return l<0?a="0."+de("0",Math.abs(l))+a:l>=m?a=a+de("0",l-m):a=(a.substring(0,l)||"0")+"."+a.substring(l),r+a}function ge(e,t,r){if(["","-"].indexOf(e)!==-1)return e;var n=(e.indexOf(".")!==-1||r)&&t,a=fe(e),u=a.beforeDecimal,l=a.afterDecimal,m=a.hasNegation,h=parseFloat("0."+(l||"0")),S=l.length<=t?"0."+l:h.toFixed(t),p=S.split("."),v=u;u&&Number(p[0])&&(v=u.split("").reverse().reduce(function(E,O,g){return E.length>g?(Number(E[0])+Number(O)).toString()+E.substring(1,E.length):O+E},p[0]));var x=ye(p[1]||"",t,r),b=m?"-":"",c=n?".":"";return""+b+v+c+x}function _(e,t){if(e.value=e.value,e!==null){if(e.createTextRange){var r=e.createTextRange();return r.move("character",t),r.select(),!0}return e.selectionStart||e.selectionStart===0?(e.focus(),e.setSelectionRange(t,t),!0):(e.focus(),!1)}}var Ve=Ie(function(e,t){for(var r=0,n=0,a=e.length,u=t.length;e[r]===t[r]&&r<a;)r++;for(;e[a-1-n]===t[u-1-n]&&u-n>r&&a-n>r;)n++;return{from:{start:r,end:a-n},to:{start:r,end:u-n}}}),Ke=function(e,t){var r=Math.min(e.selectionStart,t);return{from:{start:r,end:e.selectionEnd},to:{start:r,end:t}}};function Pe(e,t,r){return Math.min(Math.max(e,t),r)}function ce(e){return Math.max(e.selectionStart,e.selectionEnd)}function Ue(){return typeof navigator<"u"&&!(navigator.platform&&/iPhone|iPod/.test(navigator.platform))}function Ze(e){return{from:{start:0,end:0},to:{start:0,end:e.length},lastValue:""}}function $e(e){var t=e.currentValue,r=e.formattedValue,n=e.currentValueIndex,a=e.formattedValueIndex;return t[n]===r[a]}function Ge(e,t,r,n,a,u,l){l===void 0&&(l=$e);var m=a.findIndex(function(L){return L}),h=e.slice(0,m);!t&&!r.startsWith(h)&&(t=h,r=h+r,n=n+h.length);for(var S=r.length,p=e.length,v={},x=new Array(S),b=0;b<S;b++){x[b]=-1;for(var c=0,E=p;c<E;c++){var O=l({currentValue:r,lastValue:t,formattedValue:e,currentValueIndex:b,formattedValueIndex:c});if(O&&v[c]!==!0){x[b]=c,v[c]=!0;break}}}for(var g=n;g<S&&(x[g]===-1||!u(r[g]));)g++;var F=g===S||x[g]===-1?p:x[g];for(g=n-1;g>0&&x[g]===-1;)g--;var I=g===-1||x[g]===-1?0:x[g]+1;return I>F?F:n-I<F-n?I:F}function me(e,t,r,n){var a=e.length;if(t=Pe(t,0,a),n==="left"){for(;t>=0&&!r[t];)t--;t===-1&&(t=r.indexOf(!0))}else{for(;t<=a&&!r[t];)t++;t>a&&(t=r.lastIndexOf(!0))}return t===-1&&(t=a),t}function Qe(e){for(var t=Array.from({length:e.length+1}).map(function(){return!0}),r=0,n=t.length;r<n;r++)t[r]=!!(ae(e[r])||ae(e[r-1]));return t}function we(e,t,r,n,a,u){u===void 0&&(u=Q);var l=We(function(c,E){var O,g;return Se(c)?(g="",O=""):typeof c=="number"||E?(g=typeof c=="number"?xe(c):c,O=n(g)):(g=a(c,void 0),O=n(g)),{formattedValue:O,numAsString:g}}),m=R.useState(function(){return l(Y(e)?t:e,r)}),h=m[0],S=m[1],p=function(c,E){c.formattedValue!==h.formattedValue&&S({formattedValue:c.formattedValue,numAsString:c.value}),u(c,E)},v=e,x=r;Y(e)&&(v=h.numAsString,x=!0);var b=l(v,x);return R.useMemo(function(){S(b)},[b.formattedValue]),[h,p]}function ze(e){return e.replace(/[^0-9]/g,"")}function Je(e){return e}function _e(e){var t=e.type;t===void 0&&(t="text");var r=e.displayType;r===void 0&&(r="input");var n=e.customInput,a=e.renderText,u=e.getInputRef,l=e.format;l===void 0&&(l=Je);var m=e.removeFormatting;m===void 0&&(m=ze);var h=e.defaultValue,S=e.valueIsNumericString,p=e.onValueChange,v=e.isAllowed,x=e.onChange;x===void 0&&(x=Q);var b=e.onKeyDown;b===void 0&&(b=Q);var c=e.onMouseUp;c===void 0&&(c=Q);var E=e.onFocus;E===void 0&&(E=Q);var O=e.onBlur;O===void 0&&(O=Q);var g=e.value,F=e.getCaretBoundary;F===void 0&&(F=Qe);var I=e.isValidInputCharacter;I===void 0&&(I=ae);var L=e.isCharacterSame,M=he(e,["type","displayType","customInput","renderText","getInputRef","format","removeFormatting","defaultValue","valueIsNumericString","onValueChange","isAllowed","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value","getCaretBoundary","isValidInputCharacter","isCharacterSame"]),z=we(g,h,!!S,l,m,p),K=z[0],V=K.formattedValue,k=K.numAsString,J=z[1],W=R.useRef(),U=R.useRef({formattedValue:V,numAsString:k}),Z=function(o,i){U.current={formattedValue:o.formattedValue,numAsString:o.value},J(o,i)},H=R.useState(!1),ee=H[0],d=H[1],s=R.useRef(null),w=R.useRef({setCaretTimeout:null,focusTimeout:null});R.useEffect(function(){return d(!0),function(){clearTimeout(w.current.setCaretTimeout),clearTimeout(w.current.focusTimeout)}},[]);var T=l,j=function(o,i){var f=parseFloat(i);return{formattedValue:o,value:i,floatValue:isNaN(f)?void 0:f}},A=function(o,i,f){o.selectionStart===0&&o.selectionEnd===o.value.length||(_(o,i),w.current.setCaretTimeout=setTimeout(function(){o.value===f&&o.selectionStart!==i&&_(o,i)},0))},C=function(o,i,f){return me(o,i,F(o),f)},X=function(o,i,f){var D=F(i),B=Ge(i,V,o,f,D,I,L);return B=me(i,B,D),B},oe=function(o){var i=o.formattedValue;i===void 0&&(i="");var f=o.input,D=o.source,B=o.event,N=o.numAsString,y;if(f){var P=o.inputValue||f.value,$=ce(f);f.value=i,y=X(P,i,$),y!==void 0&&A(f,y,i)}i!==V&&Z(j(i,N),{event:B,source:D})};R.useEffect(function(){var o=U.current,i=o.formattedValue,f=o.numAsString;(V!==i||k!==f)&&Z(j(V,k),{event:void 0,source:re.props})},[V,k]);var te=s.current?ce(s.current):void 0,ne=typeof window<"u"?R.useLayoutEffect:R.useEffect;ne(function(){var o=s.current;if(V!==U.current.formattedValue&&o){var i=X(U.current.formattedValue,V,te);o.value=V,A(o,i,V)}},[V]);var ie=function(o,i,f){var D=i.target,B=W.current?Ke(W.current,D.selectionEnd):Ve(V,o),N=Object.assign(Object.assign({},B),{lastValue:V}),y=m(o,N),P=T(y);if(y=m(P,void 0),v&&!v(j(P,y))){var $=i.target,G=ce($),se=X(o,V,G);return $.value=V,A($,se,V),!1}return oe({formattedValue:P,numAsString:y,inputValue:o,event:i,source:f,input:i.target}),!0},le=function(o,i){i===void 0&&(i=0);var f=o.selectionStart,D=o.selectionEnd;W.current={selectionStart:f,selectionEnd:D+i}},Ne=function(o){var i=o.target,f=i.value,D=ie(f,o,re.event);D&&x(o),W.current=void 0},Ee=function(o){var i=o.target,f=o.key,D=i.selectionStart,B=i.selectionEnd,N=i.value;N===void 0&&(N="");var y;f==="ArrowLeft"||f==="Backspace"?y=Math.max(D-1,0):f==="ArrowRight"?y=Math.min(D+1,N.length):f==="Delete"&&(y=D);var P=0;f==="Delete"&&D===B&&(P=1);var $=f==="ArrowLeft"||f==="ArrowRight";if(y===void 0||D!==B&&!$){b(o),le(i,P);return}var G=y;if($){var se=f==="ArrowLeft"?"left":"right";G=C(N,y,se),G!==y&&o.preventDefault()}else f==="Delete"&&!I(N[y])?G=C(N,y,"right"):f==="Backspace"&&!I(N[y])&&(G=C(N,y,"left"));G!==y&&A(i,G,N),b(o),le(i,P)},Oe=function(o){var i=o.target,f=function(){var D=i.selectionStart,B=i.selectionEnd,N=i.value;if(N===void 0&&(N=""),D===B){var y=C(N,D);y!==D&&A(i,y,N)}};f(),requestAnimationFrame(function(){f()}),c(o),le(i)},Ae=function(o){o.persist&&o.persist();var i=o.target,f=o.currentTarget;s.current=i,w.current.focusTimeout=setTimeout(function(){var D=i.selectionStart,B=i.selectionEnd,N=i.value;N===void 0&&(N="");var y=C(N,D);y!==D&&!(D===0&&B===N.length)&&A(i,y,N),E(Object.assign(Object.assign({},o),{currentTarget:f}))},0)},Te=function(o){s.current=null,clearTimeout(w.current.focusTimeout),clearTimeout(w.current.setCaretTimeout),O(o)},je=ee&&Ue()?"numeric":void 0,ve=Object.assign({inputMode:je},M,{type:t,value:V,onChange:Ne,onKeyDown:Ee,onMouseUp:Oe,onFocus:Ae,onBlur:Te});if(r==="text")return a?q.createElement(q.Fragment,null,a(V,M)||null):q.createElement("span",Object.assign({},M,{ref:u}),V);if(n){var Ce=n;return q.createElement(Ce,Object.assign({},ve,{ref:u}))}return q.createElement("input",Object.assign({},ve,{ref:u}))}function pe(e,t){var r=t.decimalScale,n=t.fixedDecimalScale,a=t.prefix;a===void 0&&(a="");var u=t.suffix;u===void 0&&(u="");var l=t.allowNegative,m=t.thousandsGroupStyle;if(m===void 0&&(m="thousand"),e===""||e==="-")return e;var h=ue(t),S=h.thousandSeparator,p=h.decimalSeparator,v=r!==0&&e.indexOf(".")!==-1||r&&n,x=fe(e,l),b=x.beforeDecimal,c=x.afterDecimal,E=x.addNegation;return r!==void 0&&(c=ye(c,r,!!n)),S&&(b=ke(b,S,m)),a&&(b=a+b),u&&(c=c+u),E&&(b="-"+b),e=b+(v&&p||"")+c,e}function ue(e){var t=e.decimalSeparator;t===void 0&&(t=".");var r=e.thousandSeparator,n=e.allowedDecimalSeparators;return r===!0&&(r=","),n||(n=[t,"."]),{decimalSeparator:t,thousandSeparator:r,allowedDecimalSeparators:n}}function He(e,t){e===void 0&&(e="");var r=new RegExp("(-)"),n=new RegExp("(-)(.)*(-)"),a=r.test(e),u=n.test(e);return e=e.replace(/-/g,""),a&&!u&&t&&(e="-"+e),e}function Xe(e,t){return new RegExp("(^-)|[0-9]|"+be(e),"g")}function qe(e,t,r){return e===""?!0:!t?.match(/\d/)&&!r?.match(/\d/)&&typeof e=="string"&&!isNaN(Number(e))}function Ye(e,t,r){var n;t===void 0&&(t=Ze(e));var a=r.allowNegative,u=r.prefix;u===void 0&&(u="");var l=r.suffix;l===void 0&&(l="");var m=r.decimalScale,h=t.from,S=t.to,p=S.start,v=S.end,x=ue(r),b=x.allowedDecimalSeparators,c=x.decimalSeparator,E=e[v]===c;if(ae(e)&&(e===u||e===l)&&t.lastValue==="")return e;if(v-p===1&&b.indexOf(e[p])!==-1){var O=m===0?"":c;e=e.substring(0,p)+O+e.substring(p+1,e.length)}var g=function(s,w,T){var j=!1,A=!1;u.startsWith("-")?j=!1:s.startsWith("--")?(j=!1,A=!0):l.startsWith("-")&&s.length===l.length?j=!1:s[0]==="-"&&(j=!0);var C=j?1:0;return A&&(C=2),C&&(s=s.substring(C),w-=C,T-=C),{value:s,start:w,end:T,hasNegation:j}},F=g(e,p,v),I=F.hasNegation;n=F,e=n.value,p=n.start,v=n.end;var L=g(t.lastValue,h.start,h.end),M=L.start,z=L.end,K=L.value,V=e.substring(p,v);e.length&&K.length&&(M>K.length-l.length||z<u.length)&&!(V&&l.startsWith(V))&&(e=K);var k=0;e.startsWith(u)?k+=u.length:p<u.length&&(k=p),e=e.substring(k),v-=k;var J=e.length,W=e.length-l.length;e.endsWith(l)?J=W:(v>W||v>e.length-l.length)&&(J=v),e=e.substring(0,J),e=He(I?"-"+e:e,a),e=(e.match(Xe(c))||[]).join("");var U=e.indexOf(c);e=e.replace(new RegExp(be(c),"g"),function(s,w){return w===U?".":""});var Z=fe(e,a),H=Z.beforeDecimal,ee=Z.afterDecimal,d=Z.addNegation;return S.end-S.start<h.end-h.start&&H===""&&E&&!parseFloat(ee)&&(e=d?"-":""),e}function et(e,t){var r=t.prefix;r===void 0&&(r="");var n=t.suffix;n===void 0&&(n="");var a=Array.from({length:e.length+1}).map(function(){return!0}),u=e[0]==="-";a.fill(!1,0,r.length+(u?1:0));var l=e.length;return a.fill(!1,l-n.length+1,l+1),a}function tt(e){var t=ue(e),r=t.thousandSeparator,n=t.decimalSeparator,a=e.prefix;a===void 0&&(a="");var u=e.allowNegative;if(u===void 0&&(u=!0),r===n)throw new Error(`
        Decimal separator can't be same as thousand separator.
        thousandSeparator: `+r+` (thousandSeparator = {true} is same as thousandSeparator = ",")
        decimalSeparator: `+n+` (default value for decimalSeparator is .)
     `);return a.startsWith("-")&&u&&(console.error(`
      Prefix can't start with '-' when allowNegative is true.
      prefix: `+a+`
      allowNegative: `+u+`
    `),u=!1),Object.assign(Object.assign({},e),{allowNegative:u})}function rt(e){e=tt(e),e.decimalSeparator,e.allowedDecimalSeparators,e.thousandsGroupStyle;var t=e.suffix,r=e.allowNegative,n=e.allowLeadingZeros,a=e.onKeyDown;a===void 0&&(a=Q);var u=e.onBlur;u===void 0&&(u=Q);var l=e.thousandSeparator,m=e.decimalScale,h=e.fixedDecimalScale,S=e.prefix;S===void 0&&(S="");var p=e.defaultValue,v=e.value,x=e.valueIsNumericString,b=e.onValueChange,c=he(e,["decimalSeparator","allowedDecimalSeparators","thousandsGroupStyle","suffix","allowNegative","allowLeadingZeros","onKeyDown","onBlur","thousandSeparator","decimalScale","fixedDecimalScale","prefix","defaultValue","value","valueIsNumericString","onValueChange"]),E=ue(e),O=E.decimalSeparator,g=E.allowedDecimalSeparators,F=function(d){return pe(d,e)},I=function(d,s){return Ye(d,s,e)},L=Y(v)?p:v,M=x??qe(L,S,t);Y(v)?Y(p)||(M=M||typeof p=="number"):M=M||typeof v=="number";var z=function(d){return Se(d)?d:(typeof d=="number"&&(d=xe(d)),M&&typeof m=="number"?ge(d,m,!!h):d)},K=we(z(v),z(p),!!M,F,I,b),V=K[0],k=V.numAsString,J=V.formattedValue,W=K[1],U=function(d){var s=d.target,w=d.key,T=s.selectionStart,j=s.selectionEnd,A=s.value;if(A===void 0&&(A=""),(w==="Backspace"||w==="Delete")&&j<S.length){d.preventDefault();return}if(T!==j){a(d);return}w==="Backspace"&&A[0]==="-"&&T===S.length+1&&r&&_(s,1),m&&h&&(w==="Backspace"&&A[T-1]===O?(_(s,T-1),d.preventDefault()):w==="Delete"&&A[T]===O&&d.preventDefault()),g?.includes(w)&&A[T]===O&&_(s,T+1);var C=l===!0?",":l;w==="Backspace"&&A[T-1]===C&&_(s,T-1),w==="Delete"&&A[T]===C&&_(s,T+1),a(d)},Z=function(d){var s=k;if(s.match(/\d/g)||(s=""),n||(s=Le(s)),h&&m&&(s=ge(s,m,h)),s!==k){var w=pe(s,e);W({formattedValue:w,value:s,floatValue:parseFloat(s)},{event:d,source:re.event})}u(d)},H=function(d){return d===O?!0:ae(d)},ee=function(d){var s=d.currentValue,w=d.lastValue,T=d.formattedValue,j=d.currentValueIndex,A=d.formattedValueIndex,C=s[j],X=T[A],oe=Ve(w,s),te=oe.to,ne=function(ie){return I(ie).indexOf(".")+S.length};return v===0&&h&&m&&s[te.start]===O&&ne(s)<j&&ne(T)>A?!1:j>=te.start&&j<te.end&&g&&g.includes(C)&&X===O?!0:C===X};return Object.assign(Object.assign({},c),{value:J,valueIsNumericString:!1,isValidInputCharacter:H,isCharacterSame:ee,onValueChange:W,format:F,removeFormatting:I,getCaretBoundary:function(d){return et(d,e)},onKeyDown:U,onBlur:Z})}function at(e){var t=rt(e);return q.createElement(_e,Object.assign({},t))}function De(){return Intl.NumberFormat()?.formatToParts(1.1)?.find(e=>e.type==="decimal")?.value??"."}function nt(){return De()==="."?",":"."}const ht=e=>{const{value:t,onChange:r,disabled:n,highlight:a,validatedSelection:u,fixedDecimals:l,allowNegative:m,thousandSeparator:h,decimalSeparator:S}=e,p=R.useRef();return R.useLayoutEffect(()=>{if(u!==void 0){const v=typeof u=="number"?[u,null]:u;p.current?.setSelectionRange(v[0],v[1])}},[u]),R.createElement(Fe,null,R.createElement(at,{autoFocus:!0,getInputRef:p,className:"gdg-input",onFocus:v=>v.target.setSelectionRange(a?0:v.target.value.length,v.target.value.length),disabled:n===!0,decimalScale:l,allowNegative:m,thousandSeparator:h??nt(),decimalSeparator:S??De(),value:Object.is(t,-0)?"-":t??"",onValueChange:r}))};export{ht as default};
