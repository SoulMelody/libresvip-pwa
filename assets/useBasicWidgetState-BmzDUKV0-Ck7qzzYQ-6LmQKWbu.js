import{r as o,v as S}from"./index-Dl0ak3r9.js";import{l as M}from"./FormClearHelper-C8nMSLiM-ZOoPDlL1-Bkd7LQt0.js";function c({getStateFromWidgetMgr:n,getDefaultState:a,updateWidgetMgrState:u,element:t,widgetMgr:e,fragmentId:l,onFormCleared:d}){const[m,f]=o.useState(()=>n(e,t)??a(e,t)),[g,r]=o.useState({value:m,fromUi:!1});o.useEffect(()=>{S(g)||(r(null),f(g.value),u(t,e,g,l))},[g,u,t,e,l]);const i=o.useCallback(()=>{r({value:a(e,t),fromUi:!0}),d?.()},[r,t,a,e,d]);return M({widgetMgr:e,element:t,onFormCleared:i}),[m,r]}function p({getStateFromWidgetMgr:n,getDefaultStateFromProto:a,getCurrStateFromProto:u,updateWidgetMgrState:t,element:e,widgetMgr:l,fragmentId:d,onFormCleared:m}){const f=o.useCallback((i,s)=>a(s),[a]),[g,r]=c({getStateFromWidgetMgr:n,getDefaultState:f,updateWidgetMgrState:t,element:e,widgetMgr:l,fragmentId:d,onFormCleared:m});return o.useEffect(()=>{e.setValue&&(e.setValue=!1,r({value:u(e),fromUi:!1}))},[e,u,r]),[g,r]}export{p as C,c as M};
