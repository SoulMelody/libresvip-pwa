import{r as i,bi as L,a0 as P,d3 as W,j as r,c as k,bV as D,bW as H,cf as M,bX as U,bK as _,a5 as B,d5 as K}from"./index-B78CXhdG.js";import{c as O}from"./uniqueId-C-Y0IwFP-OVqnKMFN.js";import{b as X}from"./InputInstructions-Dg4vuFj3-PSinSqvS.js";import{F as A}from"./useBasicWidgetState-DZWY5hj--BUxyHCfG.js";import{b as G,c as N,f as Y}from"./useUpdateUiValue-DHbBSyq8-BdUUBevk.js";import{_ as Z}from"./input-DOggdJFp-BAF9k-8m.js";import"./FormClearHelper-B_V_qF_E-D_jNUu4K.js";import"./inputUtils-DCYiajnz-nYhVeN7j.js";import"./base-input-C5GI2aUZ-BHmDT_Uf.js";const q=k("div",{target:"e11y4ecf0"})({name:"bjn8wh",styles:"position:relative"});function J({disabled:a,element:t,widgetMgr:o,fragmentId:d}){const[s,u]=i.useState(()=>S(o,t)??null),[y,I]=L(),[l,c]=i.useState(!1),T=i.useCallback(()=>{u(t.default??null),c(!0)},[t.default]),[C,p]=A({getStateFromWidgetMgr:S,getDefaultStateFromProto:Q,getCurrStateFromProto:tt,updateWidgetMgrState:et,element:t,widgetMgr:o,fragmentId:d,onFormCleared:T});G(C,s,u,l);const[j,f]=i.useState(!1),e=P(),[h]=i.useState(()=>O("text_input_")),{placeholder:E,formId:n,icon:m,maxChars:b}=t,g=i.useCallback(()=>{c(!1),p({value:s,fromUi:!0})},[s,p]),F=W({formId:n})?o.allowFormEnterToSubmit(n):l,V=j&&y>e.breakpoints.hideWidgetDetails,v=i.useCallback(()=>{l&&g(),f(!1)},[l,g]),R=i.useCallback(()=>{f(!0)},[]),z=N({formId:n,maxChars:b,setDirty:c,setUiValue:u,setValueWithSource:p}),$=Y(n,g,l,o,d),x=m?.startsWith(":material"),w=x?"lg":"base";return r.jsxs(q,{className:"stTextInput","data-testid":"stTextInput",ref:I,children:[r.jsx(D,{label:t.label,disabled:a,labelVisibility:H(t.labelVisibility?.value),htmlFor:h,children:t.help&&r.jsx(M,{children:r.jsx(U,{content:t.help,placement:_.TOP_RIGHT})})}),r.jsx(Z,{value:s??"",placeholder:E,onBlur:v,onFocus:R,onChange:z,onKeyPress:$,"aria-label":t.label,disabled:a,id:h,type:at(t),autoComplete:t.autocomplete,startEnhancer:m&&r.jsx(B,{"data-testid":"stTextInputIcon",iconValue:m,size:w}),overrides:{Input:{style:{fontWeight:e.fontWeights.normal,minWidth:0,lineHeight:e.lineHeights.inputWidget,paddingRight:e.spacing.sm,paddingLeft:e.spacing.md,paddingBottom:e.spacing.sm,paddingTop:e.spacing.sm,"::placeholder":{color:e.colors.fadedText60}}},Root:{props:{"data-testid":"stTextInputRootElement"},style:{height:e.sizes.minElementHeight,borderLeftWidth:e.sizes.borderWidth,borderRightWidth:e.sizes.borderWidth,borderTopWidth:e.sizes.borderWidth,borderBottomWidth:e.sizes.borderWidth,paddingLeft:m?e.spacing.sm:0}},StartEnhancer:{style:{paddingLeft:0,paddingRight:0,minWidth:e.iconSizes.lg,color:x?e.colors.fadedText60:"inherit"}}}}),V&&r.jsx(X,{dirty:l,value:s??"",maxLength:b,inForm:W({formId:n}),allowEnterToSubmit:F})]})}function S(a,t){return a.getStringValue(t)??null}function Q(a){return a.default??null}function tt(a){return a.value??null}function et(a,t,o,d){t.setStringValue(a,o.value,{fromUi:o.fromUi},d)}function at(a){return a.type===K.Type.PASSWORD?"password":"text"}const ct=i.memo(J);export{ct as default};
